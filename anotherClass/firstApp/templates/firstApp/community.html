{% extends 'firstApp/base.html'%}
{% load static %}

{% block content %}
{% if alert_flag %}
<script>alert("삭제되었습니다.")</script>
{% endif %}
<link rel="stylesheet" href="{% static 'css/paginate.css' %}">
<link rel="stylesheet" href="{% static 'css/community.css' %}">
		<div class="container">


			<div class="row">
				<div class="col-sm-3">
					<br><br><br>
					<div class="left-sidebar">
						<ul>
                            <li><i class="fas fa-clipboard"></i>
								<a class="a_underline" href="{% url 'community' %}">전체 글</a>
							</li>
							<br>
							<p><i class="fas fa-clipboard"></i> 카테고리별</p>
							<ul class="nav flex-column">
								{% for category in cate_list %}
								<li>
									<a class="nav-link community-nav-link" href="/community/?cateId={{category.pk}}">
										{{category.name}}
									</a>
								</li>
								{% endfor %}
							</ul>
							<hr>
							<li><a class="a_underline lighter" href="{% url 'myPost' %}" >내가 쓴 글</a></li>
						</ul>
					</div>	
				</div>

				<div class="col-sm-9">

					<h4>{{cateName}}</h4>

					<br><br><br>
					<div class="blog-post-area">
							<table class="table">
								<tr>
									<th>제목</th>
									<th>작성일</th>
									<th>작성자</th>
									<th>조회수</th>
								</tr>
								{% for post in posts %}
								<tr>
									<td>
										<a class="a_underline" href="{% url 'post_detail' post.pk %}?cateId={{cateId}}&page={{page}}">
											{{ post.title }}
										</a>
										<span class="lighter" style="color:gray;">[{{ post.comments.count }}]</span>
									</td>
									<td class="lighter">{{post.created_date|date:'y.m.d H:i'}}</td>
									<td class="lighter">{{post.author}}</td>
									<td class="lighter">{{post.views}}</td>
								</tr>
								{% endfor %}
							</table>
						
						<div align="right">
							<div id="btn"> 
								<a href="/createpost">
									<input class="btn btn-primary" type="button" value="글쓰기">
								</a>
							</div>
						</div>
					</div>
					<div class="community_search_bar text-center">
						<form class="form-inline" >
						  <input class="form-control mr-sm-2" type="text" placeholder="검색어를 입력하세요." aria-label="Search">
						  <button class="btn btn-primary my-2 my-sm-0" type="submit" style="height:38px">
							<i class="fas fa-search"></i>
						  </button>
						</form>
					</div>
						{% if posts.has_other_pages %}
						<nav aria-label="Page navigation example">
						  <ul class="pagination justify-content-center">
							{% if posts.has_previous %}
							  <li class="page-item">
								  <a class="page-link" href="?cateId={{cateId}}&page={{ posts.previous_page_number }}" aria-label="Previous">
								  	<span aria-hidden="true">&laquo;</span>
        							<span class="sr-only">Previous</span>
								  </a>
							  </li>
							{% else %}
							  <li class="page-item disabled"><a class="page-link">
								  <span>&laquo;</span></a></li>
							{% endif %}
							{% for i in posts.paginator.page_range %}
							  {% if posts.number == i %}
							  <li class="page-item active">
								  <a class="page-link" href="#">{{ i }}</a><span class="sr-only">(current)</span></span>
							  </li>
							  {% else %}

							  	<li class="page-item"><a class="page-link" href="?cateId={{cateId}}&page={{ i }}">{{ i }}</a></li>

							  {% endif %}
							{% endfor %}
							{% if posts.has_next %}
							  <li class="page-item">
								  <a class="page-link" href="?cateId={{cateId}}&page={{ posts.next_page_number }}" aria-label="Next">
									  <span aria-hidden="true">&raquo;</span>
									  <span class="sr-only">Next</span>
								  </a>
							  </li>
							{% else %}
							  <li class="page-item disabled">
								  <a class="page-link">
								  <span>&raquo;</span>
								  </a>
							  </li>
							{% endif %}
						  </ul>
						</nav>
						{% endif %}

				</div>
			</div>
		</div>
{% endblock content %}